<% provide :title, 'Themes' %>
<% provide :body_id, 'themes' %>

<ol class="breadcrumb">
  <li><%= link_to 'Home', admin_root_path %></li>
  <li class="active">Themes</li>
</ol>

<div class="btn-group pull-right">
  <%= link_to new_admin_db_theme_path, class: 'btn btn-default' do %>
    <i class="fa fa-plus"></i> New Theme
  <% end %>
</div>

<h1>Themes</h1>

<table class="table table-striped">
  <thead>
    <tr>
      <th style="width:1%"></th>
      <th style="width:1%"></th>
      <th style="width:1%">Default</th>
      <th>Theme</th>
      <th>Path</th>
    </tr>
  </thead>
  <tbody>
    <% @themes.each do |theme| %>
      <tr>
        <td>
          <% unless theme.required %>
            <%= link_to 'Edit', edit_admin_db_theme_path(theme),
                          class: 'btn btn-default btn-xs' %>
          <% end %>
        </td>
        <td>
          <% unless theme.required %>
            <%= link_to 'Delete', admin_db_theme_path(theme),
                        class: 'btn btn-danger btn-xs', method: :delete,
                        data: { confirm: "Are you sure you want to delete the "\
                        "theme \"#{theme.name}\"? Its folder (if present) "\
                        "will not be touched." } %>
          <% end %>
        </td>
        <td class="text-center">
          <% if theme.default %>
            <span class="text-success">&check;</span>
          <% else %>
            <%= link_to 'Set As Default', admin_db_theme_path(theme, db_theme: { default: true }),
                        class: 'btn btn-default btn-xs', method: :patch %>
          <% end %>
        </td>
        <td><%= theme.name %></td>
        <td>
          <%= File.join(Rails.root, theme.pathname) %>
          <% if File.exist?(File.join(Rails.root, theme.pathname)) %>
            <span class="label label-success">OK</span>
          <% else %>
            <span class="label label-danger">Not Found</span>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
